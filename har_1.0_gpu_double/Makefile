
# Paths where MAGMA, CUDA, and OpenBLAS are installed.
# MAGMADIR can be .. to test without installing.
#MAGMADIR     ?= ..



#  Configuración de Saúl
MAGMADIR     = /usr/local/magma
CUDADIR      = /usr/lib/cuda
OPENBLASDIR  = /usr/lib/x86_64-linux-gnu/openblas
MKLROOT 		 = /opt/intel/mkl

CC            = gcc
LDFLAGS       = -Wall -lm -no-pie


# ----------------------------------------
# Flags and paths to MAGMA, CUDA, and LAPACK/BLAS
MAGMA_CFLAGS     := -DADD_ \
										-I$(MAGMADIR)/include \
										-I$(MAGMADIR)/sparse/include \
										-I$(CUDADIR)/include

MAGMA_F90FLAGS   := -Dmagma_devptr_t="integer(kind=8)" \
										-I$(MAGMADIR)/include

# may be lib instead of lib64 on some systems
MAGMA_LIBS       := -L$(MAGMADIR)/lib -lmagma_sparse -lmagma \
										-L$(CUDADIR)/lib64 -lcublas -lcudart -lcusparse \
										-L$(OPENBLASDIR)/lib -lopenblas

LSOLVER_LIB      := ./lpsolve/liblpsolve55.a -ldl


# ----------------------------------------

all: hit_run

hit_run:
	$(CC)  main.c -o hit_run  $(CFLAGS) $(LDFLAGS) $(MAGMA_CFLAGS) $(MAGMA_LIBS) $(LSOLVER_LIB) -I$(MKLROOT)/include  -L $(MKLROOT)/lib/64 -L $(MKLROOT)/lib/64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core

clean:
	rm hit_run
